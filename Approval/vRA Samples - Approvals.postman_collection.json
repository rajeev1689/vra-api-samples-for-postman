{
	"id": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
	"name": "vRA Samples - Approvals",
	"description": "The approval service provides features for managing and tracking the human approval tasks associated with a service process/artifact in a provider realm. It also provides a record of the approval process when it completes.\n\n## Available Use Cases\n\n### Action\n\n * Get approval work items\n * Get approval request information\n * Approve a request\n * Reject a request\n\n### Configuration\n\n * Get approval policy types\n * Define and create approval policy",
	"order": [],
	"folders": [
		{
			"id": "a99479e0-009d-35b5-b68b-de9579f077ff",
			"name": "Action",
			"description": "",
			"order": [
				"4d74d756-b18c-975f-9266-5bffd0018f22",
				"677007e5-301b-e8af-0a89-f8175b3bcdaa",
				"8e158d86-0e17-a60d-6716-9c68fbc533db",
				"b551a214-45ba-a0e8-dd8b-c024bc1cadb3",
				"34143f6e-e600-f239-b01e-4f5a8de1372b",
				"d183b256-fcb4-6ed2-760e-01598e155ab1",
				"4c13e4d2-28d6-1541-a131-9841c5fe2f23",
				"1d72606d-4102-0cfe-fa67-8eca9649a92b"
			],
			"owner": "233286",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d"
		},
		{
			"id": "c4c61af5-f0af-fc3e-3830-471ff4975dcd",
			"name": "Configuration",
			"description": "",
			"order": [
				"501b9c89-39e6-7cb0-60c9-b95e59d9ebb0",
				"fe64bd87-80c9-7743-b4e1-069a1430a0b3",
				"e9016810-a946-c95b-fc23-367f5698c9a8",
				"e4e2585c-3439-8834-c301-6db50cd4c8e0"
			],
			"owner": "233286"
		}
	],
	"timestamp": 1491668332930,
	"owner": "233286",
	"public": false,
	"requests": [
		{
			"id": "1d72606d-4102-0cfe-fa67-8eca9649a92b",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\nContent-Type: application/json\n",
			"url": "https://{{va-fqdn}}/workitem-service/api/workitems/{{work-item-guid}}/actions/com.vmware.csp.core.approval.action.reject",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1491671528251,
			"name": "Reject request",
			"description": "Reject an approval request.",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff",
			"rawModeData": "{\n  \"workItemId\": \"{{work-item-guid}}\",\n  \"workItemActionId\": \"com.vmware.csp.core.approval.action.reject\",\n  \"formData\": {\n    \"entries\": [\n    \t{\n\t\t\t\"key\": \"source-source-provider-Cafe.Shim.VirtualMachine.NumberOfInstances\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 1\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.Memory.Size\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 512\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.CPU.Count\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 1\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.LeaseDays\",\n\t\t\t\"value\": {\n\t\t\t\t \"type\": \"integer\",\n\t\t\t\t \"value\": 0\n\t\t\t}\n\t\t},\n    \t{\n\t\t\t\"key\": \"source-businessJustification\",\n\t\t\t\"value\": {\n\t\t\t\t \"type\": \"string\",\n\t\t\t\t \"value\": \"{{business reason}}\"\n\t\t\t }\n\t\t}\n    ]\n  }\n}"
		},
		{
			"id": "34143f6e-e600-f239-b01e-4f5a8de1372b",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"url": "https://{{va-fqdn}}/approval-service/api/info/approvalrequests/{{approval-request-guid}}/form/source",
			"pathVariables": {},
			"preRequestScript": null,
			"method": "GET",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"data": null,
			"dataMode": "params",
			"name": "Get source of approval associated with the approval request",
			"description": "Retrieve a read-only form providing detailed information about the sourceof an approval associated with a specific approval request.",
			"descriptionFormat": "html",
			"time": 1492692487317,
			"version": 2,
			"responses": [],
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff"
		},
		{
			"id": "4c13e4d2-28d6-1541-a131-9841c5fe2f23",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\nContent-Type: application/json\n",
			"url": "https://{{va-fqdn}}/workitem-service/api/workitems/{{work-item-guid}}/actions/com.vmware.csp.core.approval.action.approve",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1491671501856,
			"name": "Approve request",
			"description": "Approve the request. You can modify any entries for the approval form and it will update the values accordingly for the request.",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"isFromCollection": true,
			"collectionRequestId": "4c13e4d2-28d6-1541-a131-9841c5fe2f23",
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff",
			"rawModeData": "{\n  \"workItemId\": \"{{work-item-guid}}\",\n  \"workItemActionId\": \"com.vmware.csp.core.approval.action.approve\",\n  \"formData\": {\n    \"entries\": [\n    \t{\n\t\t\t\"key\": \"source-source-provider-Cafe.Shim.VirtualMachine.NumberOfInstances\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 1\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.Memory.Size\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 512\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.CPU.Count\",\n\t\t\t\"value\": {\n\t\t\t\t\"type\": \"integer\",\n\t\t\t\t\"value\": 1\n\t\t\t}\n    \t},\n    \t{\n\t\t\t\"key\": \"source-source-provider-VirtualMachine.LeaseDays\",\n\t\t\t\"value\": {\n\t\t\t\t \"type\": \"integer\",\n\t\t\t\t \"value\": 0\n\t\t\t}\n\t\t},\n    \t{\n\t\t\t\"key\": \"source-businessJustification\",\n\t\t\t\"value\": {\n\t\t\t\t \"type\": \"string\",\n\t\t\t\t \"value\": \"{{business reason}}\"\n\t\t\t }\n\t\t}\n    ]\n  }\n}"
		},
		{
			"id": "4d74d756-b18c-975f-9266-5bffd0018f22",
			"headers": "Accept: application/json\nContent-Type: application/json\n",
			"url": "https://{{va-fqdn}}/identity/api/tokens",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"tests": "tests[\"Status code is 200\"] = responseCode.code === 200;\ntests[\"Response contains auth token\"] = responseBody.has(\"id\");\npostman.clearEnvironmentVariable(\"token\");\nvar data = JSON.parse(responseBody);\ntests[\"Auth token is not null\"] = data.id !== \"\";\npostman.setEnvironmentVariable(\"token\", data.id);",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1483453143879,
			"name": "Login",
			"description": "Login with an authorized approver. Returns a token associated with the provided credentials. e.g. (username@domain)",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"isFromCollection": true,
			"collectionRequestId": "4d74d756-b18c-975f-9266-5bffd0018f22",
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff",
			"rawModeData": "{\"username\":\"{{username}}\",\"password\":\"{{password}}\",\"tenant\":\"{{tenant}}\"}"
		},
		{
			"id": "501b9c89-39e6-7cb0-60c9-b95e59d9ebb0",
			"headers": "Accept: application/json\nContent-Type: application/json\n",
			"url": "https://{{va-fqdn}}/identity/api/tokens",
			"preRequestScript": "",
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"tests": "tests[\"Status code is 200\"] = responseCode.code === 200;\ntests[\"Response contains auth token\"] = responseBody.has(\"id\");\npostman.clearEnvironmentVariable(\"token\");\nvar data = JSON.parse(responseBody);\ntests[\"Auth token is not null\"] = data.id !== \"\";\npostman.setEnvironmentVariable(\"token\", data.id);",
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1483453143879,
			"name": "Login with tenant user",
			"description": " Returns a token associated with the provided credentials. e.g. (username@domain)",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"isFromCollection": true,
			"collectionRequestId": "501b9c89-39e6-7cb0-60c9-b95e59d9ebb0",
			"folder": "c4c61af5-f0af-fc3e-3830-471ff4975dcd",
			"rawModeData": "{\"username\":\"{{username}}\",\"password\":\"{{password}}\",\"tenant\":\"{{tenant}}\"}"
		},
		{
			"id": "677007e5-301b-e8af-0a89-f8175b3bcdaa",
			"name": "Get open approval requests",
			"dataMode": "params",
			"data": null,
			"rawModeData": null,
			"descriptionFormat": "html",
			"description": "Get all available workitems such as approval requests or manual tasks.",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"method": "GET",
			"pathVariables": {},
			"url": "https://{{va-fqdn}}/workitem-service/api/workitems",
			"preRequestScript": null,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"responses": [],
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"isFromCollection": true,
			"collectionRequestId": "677007e5-301b-e8af-0a89-f8175b3bcdaa",
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff"
		},
		{
			"id": "8e158d86-0e17-a60d-6716-9c68fbc533db",
			"name": "Get open approval request by request id",
			"dataMode": "params",
			"data": null,
			"rawModeData": null,
			"descriptionFormat": "html",
			"description": "Get open approval request by request identifier",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"method": "GET",
			"pathVariables": {},
			"url": "https://{{va-fqdn}}/workitem-service/api/workitems/{{work-item-guid}}",
			"preRequestScript": null,
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"responses": [],
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"isFromCollection": true,
			"collectionRequestId": "8e158d86-0e17-a60d-6716-9c68fbc533db",
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff"
		},
		{
			"id": "b551a214-45ba-a0e8-dd8b-c024bc1cadb3",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"url": "https://{{va-fqdn}}/approval-service/api/info/approvalrequests/{{approval-instance-guid}}",
			"pathVariables": {},
			"preRequestScript": null,
			"method": "GET",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"data": null,
			"dataMode": "params",
			"name": "Get approval request information",
			"description": "Retrieve information about a specific approval request by its unique identifier. \n\nNote: approval-instance-guid should be same as workitem id, in most cases.",
			"descriptionFormat": "html",
			"time": 1491671242405,
			"version": 2,
			"responses": [],
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff"
		},
		{
			"id": "d183b256-fcb4-6ed2-760e-01598e155ab1",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"url": "https://{{va-fqdn}}/workitem-service/api/workitems/{{approval-request-guid}}/form",
			"pathVariables": {},
			"preRequestScript": null,
			"method": "GET",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"data": null,
			"dataMode": "params",
			"name": "Get approval request form data",
			"description": "",
			"descriptionFormat": "html",
			"time": 1492693845778,
			"version": 2,
			"responses": [],
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"folder": "a99479e0-009d-35b5-b68b-de9579f077ff"
		},
		{
			"id": "e4e2585c-3439-8834-c301-6db50cd4c8e0",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\nContent-Type: application/json\n",
			"url": "https://{{va-fqdn}}/approval-service/api/policies",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "POST",
			"data": [],
			"dataMode": "raw",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1494114175312,
			"name": "Create an approval policy",
			"description": "Create an approval policy for a catalog item request. Similarly you can create approval policy for other requests. Just get all policy types and work accordingly.",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"rawModeData": "{\n  \"name\": \"{{approval-policy-name}}\",\n  \"description\": \"\",\n  \"policyType\": {\n    \"id\": \"com.vmware.cafe.catalog.request.catalogitem\",\n    \"name\": \"Service Catalog - Catalog Item Request\",\n    \"description\": \"\",\n    \"serviceTypeId\": \"com.vmware.csp.core.cafe.catalog\",\n    \"classId\": \"catalogItemRequest\",\n    \"typeFilter\": null,\n    \"phaseTypes\": [\n      {\n        \"id\": \"com.vmware.cafe.catalog.request.pre\",\n        \"name\": \"Pre Approval\",\n        \"description\": \"Approvals sought before a request is fulfilled.\",\n        \"forms\": null,\n        \"phaseOrder\": 0,\n        \"allowUpdates\": true\n      },\n      {\n        \"id\": \"com.vmware.cafe.catalog.request.post\",\n        \"name\": \"Post Approval\",\n        \"description\": \"Approvals sought after a request has been fulfilled.\",\n        \"forms\": null,\n        \"phaseOrder\": 1,\n        \"allowUpdates\": false\n      }\n    ]\n  },\n  \"state\": \"PUBLISHED\",\n  \"stateName\": \"Active\",\n  \"phases\": [\n    {\n      \"phasetype\": {\n        \"id\": \"com.vmware.cafe.catalog.request.pre\",\n        \"name\": \"Pre Approval\",\n        \"description\": \"Approvals sought before a request is fulfilled.\",\n        \"forms\": null,\n        \"phaseOrder\": 0,\n        \"allowUpdates\": true\n      },\n      \"levels\": [\n        {\n          \"name\": \"Level 1\",\n          \"description\": \"\",\n          \"approvers\": [\n            {\n              \"value\": \"{{approver-1-username@domain}}\",\n              \"type\": \"USER\",\n              \"displayName\": \"{{approver-1-display-name}}\"\n            },\n            {\n              \"value\": \"{{approver-2-username@domain}}\",\n              \"type\": \"USER\",\n              \"displayName\": \"{{approver-2-display-name}}\"\n            }\n          ],\n          \"approvalMode\": \"ANY\",\n          \"criteria\": {\n            \"type\": \"constantClause\",\n            \"value\": {\n              \"type\": \"boolean\",\n              \"value\": true\n            }\n          },\n          \"editSchema\": {\n            \"fields\": []\n          },\n          \"levelNumber\": 1,\n          \"external\": false\n        }\n      ],\n      \"name\": \"Pre Approval\",\n      \"description\": \"Approvals sought before a request is fulfilled.\"\n    },\n    {\n      \"phasetype\": {\n        \"id\": \"com.vmware.cafe.catalog.request.post\",\n        \"name\": \"Post Approval\",\n        \"description\": \"Approvals sought after a request has been fulfilled.\",\n        \"forms\": null,\n        \"phaseOrder\": 1,\n        \"allowUpdates\": false\n      },\n      \"levels\": [\n        {\n          \"name\": \"Level 2\",\n          \"description\": \"\",\n          \"approvers\": [\n            {\n              \"value\": \"{{approver-username@domain}}\",\n              \"type\": \"USER\",\n              \"displayName\": \"{{approver-display-name}}\"\n            }\n          ],\n          \"approvalMode\": \"ANY\",\n          \"criteria\": {\n            \"type\": \"constantClause\",\n            \"value\": {\n              \"type\": \"boolean\",\n              \"value\": true\n            }\n          },\n          \"editSchema\": {\n            \"fields\": []\n          },\n          \"levelNumber\": 1,\n          \"external\": false\n        }\n      ],\n      \"name\": \"Post Approval\",\n      \"description\": \"Approvals sought after a request has been fulfilled.\"\n    }\n  ],\n  \"approvableItemId\": null,\n  \"typeFilter\": null,\n  \"approvableItemName\": null,\n  \"approvableItemServiceTypeId\": null,\n  \"createdBy\": \"{{username}}\",\n  \"version\": 0\n}"
		},
		{
			"id": "e9016810-a946-c95b-fc23-367f5698c9a8",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"url": "https://{{va-fqdn}}/approval-service/api/policies?page={{page}}&limit={{limit}}",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "GET",
			"data": null,
			"dataMode": "params",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1491670006121,
			"name": "Get approval policies",
			"description": "Get existing approval policies configured.",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"isFromCollection": true,
			"collectionRequestId": "e9016810-a946-c95b-fc23-367f5698c9a8",
			"folder": "c4c61af5-f0af-fc3e-3830-471ff4975dcd"
		},
		{
			"id": "fe64bd87-80c9-7743-b4e1-069a1430a0b3",
			"headers": "Accept: application/json\nAuthorization: Bearer {{token}}\n",
			"url": "https://{{va-fqdn}}/approval-service/api/policytypes?page={{page}}&limit={{limit}}",
			"preRequestScript": null,
			"pathVariables": {},
			"method": "GET",
			"data": null,
			"dataMode": "params",
			"tests": null,
			"currentHelper": "normal",
			"helperAttributes": {},
			"time": 1491669794743,
			"name": "Get approval policy types",
			"description": "Get approval policy types availble.",
			"collectionId": "a7ce1b96-bc5f-51bf-feae-760056c51d6d",
			"responses": [],
			"isFromCollection": true,
			"collectionRequestId": "fe64bd87-80c9-7743-b4e1-069a1430a0b3",
			"folder": "c4c61af5-f0af-fc3e-3830-471ff4975dcd"
		}
	]
}